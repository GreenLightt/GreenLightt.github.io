<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.lug.ustc.edu.cn/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Mysql," />








  <link rel="shortcut icon" type="image/x-icon" href="/img/koala.ico?v=5.1.2" />






<meta name="description" content="整理 Mysql 用在 select 和 where 子句中的函数">
<meta name="keywords" content="Mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql 用在 select 和 where 子句中的函数">
<meta property="og:url" content="http://yoursite.com/2018/01/08/mysql-select-where-func/index.html">
<meta property="og:site_name" content="Redgo&#39;s Blog">
<meta property="og:description" content="整理 Mysql 用在 select 和 where 子句中的函数">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-03-02T10:48:12.530Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mysql 用在 select 和 where 子句中的函数">
<meta name="twitter:description" content="整理 Mysql 用在 select 和 where 子句中的函数">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/01/08/mysql-select-where-func/"/>





  <title>Mysql 用在 select 和 where 子句中的函数 | Redgo's Blog</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Redgo's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-link">
          <a href="/link/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-anchor"></i> <br />
            
            日常链接
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            他山之石
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/08/mysql-select-where-func/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Redgo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Redgo's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Mysql 用在 select 和 where 子句中的函数</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-08T01:09:41+08:00">
                2018-01-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          
              <div class="post-description">
                  整理 Mysql 用在 select 和 where 子句中的函数
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>转自 <a href="http://www.yesky.com/imagesnew/software/mysql/manual_Reference.html#Functions" target="_blank" rel="noopener">MySQL中文参考手册 7.4 节 用在SELECT和WHERE子句中的函数</a></p>
<h1 id="算术函数"><a href="#算术函数" class="headerlink" title="算术函数"></a>算术函数</h1><p><strong>加法</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">3</span>+<span class="number">5</span>;  <span class="comment">// 输出 8</span></span><br></pre></td></tr></table></figure>
<p><strong>减法</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">3</span><span class="number">-5</span>;  <span class="comment">// 输出 -2</span></span><br></pre></td></tr></table></figure>
<p><strong>乘法</strong><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">3</span>*<span class="number">5</span>;  <span class="comment">// 输出 15</span></span><br><span class="line"></span><br><span class="line">select <span class="number">18014398509481984</span>*<span class="number">18014398509481984.0</span>;  <span class="comment">// 输出 324518553658426726783156020576256.0</span></span><br><span class="line"></span><br><span class="line">select <span class="number">18014398509481984</span>*<span class="number">18014398509481984</span>;  <span class="comment">// 输出 0 因为 整数乘积的结果超过用BIGINT计算的 64 位范围</span></span><br></pre></td></tr></table></figure></p>
<p><strong>除法</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">3</span>/<span class="number">5</span>;  <span class="comment">// 输出 0.6</span></span><br><span class="line"></span><br><span class="line">select <span class="number">102</span>/(<span class="number">1</span><span class="number">-1</span>);  <span class="comment">// 输出 NULL</span></span><br></pre></td></tr></table></figure>
<h1 id="位函数"><a href="#位函数" class="headerlink" title="位函数"></a>位函数</h1><p><strong>位与</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">29</span> &amp; <span class="number">15</span>;  <span class="comment">// 输出 13</span></span><br></pre></td></tr></table></figure>
<p><strong>位或</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">29</span> | <span class="number">15</span>;  <span class="comment">// 输出 31</span></span><br></pre></td></tr></table></figure>
<p><strong>左移位一个长(BIGINT)数字。</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">1</span> &lt;&lt; <span class="number">2</span>;  <span class="comment">// 输出 4</span></span><br></pre></td></tr></table></figure>
<p><strong>右移位一个长(BIGINT)数字。</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">4</span> <span class="meta">&gt;&gt; </span><span class="number">2</span>;  <span class="regexp">//</span> 输出 <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p><strong>颠倒所有的位。</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">5</span> &amp; ~<span class="number">1</span>;  <span class="comment">// 输出 4</span></span><br></pre></td></tr></table></figure>
<p><strong>二进制数中包含1的个数</strong></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">BIT_COUNT</span>(<span class="params"><span class="number">29</span></span>)</span>;  <span class="comment">// 输出 4</span></span><br></pre></td></tr></table></figure>
<h1 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h1><p><strong>逻辑与</strong><br>如果任何一个参数是 0 或 <code>NULL</code>，返回0，否则返回1。<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">select</span> <span class="number">1</span> &amp;&amp; <span class="built_in">NULL</span>;  <span class="comment">// 输出 0</span></span><br><span class="line"><span class="built_in">select</span> <span class="number">1</span> &amp;&amp; <span class="number">0</span>;  <span class="comment">// 输出 0</span></span><br></pre></td></tr></table></figure></p>
<p><strong>逻辑或</strong><br>如果任何一个参数不是 0 并且不 <code>NULL</code>，返回 1。<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">1</span> || <span class="number">0</span>;  <span class="comment">// 输出 1</span></span><br><span class="line">select <span class="number">1</span> || NULL;  <span class="comment">// 输出 1</span></span><br><span class="line">select <span class="number">0</span> || <span class="number">0</span>;  <span class="comment">// 输出 0</span></span><br></pre></td></tr></table></figure></p>
<p><strong>逻辑非</strong><br>如果参数是 0，返回 1，否则返回 0。例外： <code>NOT NULL</code> 返回 <code>NULL</code>。<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">select</span> <span class="keyword">NOT</span> <span class="number">1</span>;  <span class="comment">// 输出 0</span></span><br><span class="line"><span class="built_in">select</span> <span class="keyword">NOT</span> <span class="built_in">NULL</span>;  <span class="comment">// 输出 NULL</span></span><br><span class="line"><span class="built_in">select</span> ! (<span class="number">1</span>+<span class="number">1</span>);  <span class="comment">// 输出 0</span></span><br><span class="line"><span class="built_in">select</span> ! <span class="number">1</span>+<span class="number">1</span>;  <span class="comment">// 输出 1</span></span><br></pre></td></tr></table></figure></p>
<h1 id="比较运算"><a href="#比较运算" class="headerlink" title="比较运算"></a>比较运算</h1><p><code>MySQL</code> 使用下列规则执行比较：</p>
<ul>
<li>如果一个或两个参数是 <code>NULL</code>，比较的结果是 <code>NULL</code>，除了 <code>&lt;=&gt;</code> 操作符。</li>
<li>如果在比较中操作的两个参数是字符串，他们作为字符串被比较。</li>
<li>如果两个参数是整数，他们作为整数被比较。</li>
<li>十六进制的值如果不与一个数字比较，则被当作二进制字符串。</li>
<li>如果参数之一是一个 <code>TIMESTAMP</code> 或 <code>DATETIME</code> 列而其他参数是一个常数，在比较执行前，常数被转换为一个时间标记。这样做是为了对 <code>ODBC</code> 更友好。</li>
<li>在所有其他的情况下，参数作为浮点(实数)数字被比较。</li>
</ul>
<p><strong>等于</strong></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span> = <span class="number">0</span>;  <span class="comment">// 输出 0</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">'0'</span> = <span class="number">0</span>; <span class="comment">// 输出 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">'0.0'</span> = <span class="number">0</span>; <span class="comment">// 输出 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">'0.01'</span> = <span class="number">0</span>; <span class="comment">// 输出 0</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">'.01'</span> = <span class="number">0.01</span>; <span class="comment">// 输出 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span> = <span class="literal">null</span>; <span class="comment">// 输出 null</span></span><br></pre></td></tr></table></figure>
<p><strong>安全等于</strong></p>
<p>和 <code>=</code> 不一样， <code>null</code> 会被纳入可比较；</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span> = <span class="literal">null</span>; <span class="comment">// 输出 0</span></span><br></pre></td></tr></table></figure>
<p><strong>不等于</strong></p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select <span class="string">'.01'</span> &lt;&gt; <span class="string">'0.01'</span>; <span class="comment">// 输出 1</span></span><br><span class="line">select <span class="number">.01</span> &lt;&gt; <span class="string">'0.01'</span>; <span class="comment">// 输出 0</span></span><br><span class="line">select <span class="string">'zapp'</span> &lt;&gt; <span class="string">'zappp'</span>; <span class="comment">// 输出 1</span></span><br></pre></td></tr></table></figure>
<p><strong>小于或等于</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">0.1</span> &lt;= <span class="number">2</span>; <span class="comment">// 输出 1</span></span><br></pre></td></tr></table></figure>
<p><strong>小于</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">2</span> &lt; <span class="number">2</span>; <span class="comment">// 输出 0</span></span><br></pre></td></tr></table></figure>
<p><strong>大于或等于</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">2</span> &gt;= <span class="number">2</span>; <span class="comment">// 输出 1</span></span><br></pre></td></tr></table></figure>
<p><strong>大于</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select <span class="number">2</span> &gt; <span class="number">2</span>; <span class="comment">// 输出 0</span></span><br></pre></td></tr></table></figure>
<p><strong>NULL 和 非 NULL</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">IS</span> <span class="literal">NULL</span>, <span class="number">0</span> <span class="keyword">IS</span> <span class="literal">NULL</span>, <span class="literal">NULL</span> <span class="keyword">IS</span> <span class="literal">NULL</span>:</span><br><span class="line">// 输出 <span class="number">0</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>, <span class="number">0</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>, <span class="literal">NULL</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br><span class="line">// 输出 1 1 0</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ISNULL</span>(<span class="number">1</span>+<span class="number">1</span>); // 输出 0</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ISNULL</span>(<span class="number">1</span>/<span class="number">0</span>); // 输出 1</span><br></pre></td></tr></table></figure>
<p><strong>BETWEEN AND</strong></p>
<p>这等价于表达式(<code>min &lt;= expr AND expr &lt;= max</code>)。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">BETWEEN</span> <span class="number">2</span> <span class="keyword">AND</span> <span class="number">3</span>;  // 输出 0</span><br><span class="line"><span class="keyword">select</span> <span class="string">'b'</span> <span class="keyword">BETWEEN</span> <span class="string">'a'</span> <span class="keyword">AND</span> <span class="string">'c'</span>;  // 输出 1</span><br><span class="line"><span class="keyword">select</span> <span class="number">2</span> <span class="keyword">BETWEEN</span> <span class="number">2</span> <span class="keyword">AND</span> <span class="string">'3'</span>;  // 输出 1</span><br><span class="line"><span class="keyword">select</span> <span class="number">2</span> <span class="keyword">BETWEEN</span> <span class="number">2</span> <span class="keyword">AND</span> <span class="string">'x-3'</span>;  // 输出 0</span><br></pre></td></tr></table></figure>
<p><strong>IN 和 NOT IN</strong></p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">2</span> <span class="keyword">IN</span> (<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">'wefwf'</span>); <span class="comment">// 输出 0</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">'wefwf'</span> <span class="keyword">IN</span> (<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="string">'wefwf'</span>); <span class="comment">// 输出 1</span></span><br></pre></td></tr></table></figure>
<p><strong>COALESCE(list)</strong></p>
<p>返回 <code>list</code> 中第一个非 <code>NULL</code> 的单元。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">COALESCE</span>(<span class="literal">NULL</span>,<span class="number">1</span>); // 输出  1</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">COALESCE</span>(<span class="literal">NULL</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>); // 输出 NULL</span><br></pre></td></tr></table></figure>
<p><strong>INTERVAL(N,N1,N2,N3,…)</strong></p>
<p>如果 <code>N&lt; N1</code>，返回 0，如果 <code>N&lt; N2</code>，返回 1 等等。所有的参数被当作整数。为了函数能正确地工作，它要求 <code>N1&lt;N2&lt;N3&lt; ...&lt;Nn</code>。这是因为使用二进制搜索(很快)。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select INTERVAL(<span class="number">23</span>, <span class="number">1</span>, <span class="number">15</span>, <span class="number">17</span>, <span class="number">30</span>, <span class="number">44</span>, <span class="number">200</span>); <span class="comment">// 输出 3</span></span><br><span class="line">select INTERVAL(<span class="number">10</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>); <span class="comment">// 输出 2</span></span><br><span class="line">select INTERVAL(<span class="number">22</span>, <span class="number">23</span>, <span class="number">30</span>, <span class="number">44</span>, <span class="number">200</span>); <span class="comment">// 输出 0</span></span><br></pre></td></tr></table></figure>
<h1 id="字符串比较函数"><a href="#字符串比较函数" class="headerlink" title="字符串比较函数"></a>字符串比较函数</h1><p><strong>LIKE 与 NOT LIKE</strong></p>
<ul>
<li><code>%</code>: 匹配任何数目的字符，甚至零个字符</li>
<li><code>_</code>: 精确匹配一个字符</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">'David!'</span> <span class="keyword">LIKE</span> <span class="string">'David_'</span>; // 输出  1</span><br><span class="line"><span class="keyword">select</span> <span class="string">'David!'</span> <span class="keyword">LIKE</span> <span class="string">'%D%v%'</span>; // 输出  1</span><br></pre></td></tr></table></figure>
<p>转义字符 <code>\</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">'David!'</span> <span class="keyword">LIKE</span> <span class="string">'David\_'</span>;  // 输出  0</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="string">'David_'</span> <span class="keyword">LIKE</span> <span class="string">'David\_'</span>;  // 输出  1</span><br></pre></td></tr></table></figure>
<p>或者指定不同的转义字符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">'David_'</span> <span class="keyword">LIKE</span> <span class="string">'David|_'</span> ESCAPE <span class="string">'|'</span>; // 输出  1</span><br></pre></td></tr></table></figure>
<p><strong>REGEXP 和 NOT REGEXP</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">'Monty!'</span> REGEXP <span class="string">'m%y%%'</span>; // 输出  0</span><br><span class="line"><span class="keyword">select</span> <span class="string">'Monty!'</span> REGEXP <span class="string">'.*'</span>;  // 输出  1</span><br><span class="line"><span class="keyword">select</span> <span class="string">'new*\n*line'</span> REGEXP <span class="string">'new\\*.\\*line'</span>; // 输出   1</span><br><span class="line"><span class="keyword">select</span> <span class="string">"a"</span> REGEXP <span class="string">"A"</span>, <span class="string">"a"</span> REGEXP <span class="built_in">BINARY</span> <span class="string">"A"</span>; // 输出   1  0</span><br></pre></td></tr></table></figure>
<p><strong>STRCMP(expr1,expr2)</strong></p>
<p>如果字符串相同，<code>STRCMP()</code> 返回 0，如果第一参数根据当前的排序次序小于第二个，返回 -1，否则返回 1。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">STRCMP</span>(<span class="params"><span class="string">'text'</span>, <span class="string">'text2'</span></span>)</span>; <span class="comment">// 输出  -1</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">STRCMP</span>(<span class="params"><span class="string">'text2'</span>, <span class="string">'text'</span></span>)</span>; <span class="comment">// 输出  1</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">STRCMP</span>(<span class="params"><span class="string">'text'</span>, <span class="string">'text'</span></span>)</span>; <span class="comment">// 输出  0</span></span><br></pre></td></tr></table></figure>
<h1 id="类型转换运算符"><a href="#类型转换运算符" class="headerlink" title="类型转换运算符"></a>类型转换运算符</h1><p><code>BINARY</code> 操作符强制跟随它后面的字符串为一个二进制字符串。即使列没被定义为 <code>BINARY</code> 或 <code>BLOB</code>，这是一个强制列比较区分大小写的简易方法。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">"a"</span> = <span class="string">"A"</span>; // 输出 1</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">BINARY</span> <span class="string">"a"</span> = <span class="string">"A"</span>; // 输出 0</span><br></pre></td></tr></table></figure>
<h1 id="控制流函数"><a href="#控制流函数" class="headerlink" title="控制流函数"></a>控制流函数</h1><p><strong>IFNULL(expr1,expr2)</strong><br>如果 <code>expr1</code> 不是 <code>NULL</code>，<code>IFNULL()</code> 返回 <code>expr1</code>，否则它返回 <code>expr2</code>。<code>IFNULL()</code> 返回一个数字或字符串值，取决于它被使用的上下文环境。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">IFNULL</span>(<span class="params"><span class="number">1</span>,<span class="number">0</span></span>)</span>; <span class="comment">// 输出  1</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">IFNULL</span>(<span class="params"><span class="number">0</span>,<span class="number">10</span></span>)</span>; <span class="comment">// 输出  0</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">IFNULL</span>(<span class="params"><span class="number">1</span>/<span class="number">0</span>,<span class="number">10</span></span>)</span>; <span class="comment">// 输出 10</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">IFNULL</span>(<span class="params"><span class="number">1</span>/<span class="number">0</span>,<span class="string">'yes'</span></span>)</span>; <span class="comment">// 输出 'yes'</span></span><br></pre></td></tr></table></figure>
<p><strong>IF(expr1,expr2,expr3)</strong></p>
<p>如果 <code>expr1</code> 是 <code>TRUE</code> (<code>expr1 &lt;&gt;0且expr1&lt;&gt;NULL</code>)，那么IF()返回expr2，否则它返回expr3。IF()返回一个数字或字符串值，取决于它被使用的上下文。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">IF</span>(<span class="number">1</span>&gt;<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>); // 输出 3</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">IF</span>(<span class="number">1</span>&lt;<span class="number">2</span>,<span class="string">'yes'</span>,<span class="string">'no'</span>); // 输出 'yes'</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">IF</span>(<span class="keyword">strcmp</span>(<span class="string">'test'</span>,<span class="string">'test1'</span>),<span class="string">'yes'</span>,<span class="string">'no'</span>); // 输出 'yes'</span><br></pre></td></tr></table></figure>
<p><strong>CASE value WHEN [compare-value] THEN result [WHEN [compare-value] THEN result …] [ELSE result] END</strong></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="number">1</span> <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> <span class="string">"one"</span> <span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span> <span class="string">"two"</span> <span class="keyword">ELSE</span> <span class="string">"more"</span> <span class="keyword">END</span>; // 输出 <span class="string">"one"</span></span><br></pre></td></tr></table></figure>
<p><strong>CASE WHEN [condition] THEN result [WHEN [condition] THEN result …] [ELSE result] END</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="number">1</span>&gt;<span class="number">0</span> <span class="keyword">THEN</span> <span class="string">"true"</span> <span class="keyword">ELSE</span> <span class="string">"false"</span> <span class="keyword">END</span>; // 输出   "true"</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="built_in">BINARY</span> <span class="string">"B"</span> <span class="keyword">when</span> <span class="string">"a"</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">when</span> <span class="string">"b"</span> <span class="keyword">then</span> <span class="number">2</span> <span class="keyword">END</span>;  // 输出  NULL</span><br></pre></td></tr></table></figure>
<h1 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h1><p>所有的数学函数在一个出错的情况下返回 <code>NULL</code>。</p>
<p><code>-</code><br>单目减。改变参数的符号。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> - <span class="number">2</span>; <span class="comment">// 输出 -2</span></span><br></pre></td></tr></table></figure>
<p><strong>ABS(X)</strong><br>返回<code>X</code>的绝对值。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ABS</span>(<span class="params"><span class="number">2</span></span>)</span>; <span class="comment">// 输出  2</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ABS</span>(<span class="params"><span class="number">-32</span></span>)</span>; <span class="comment">// 输出  32</span></span><br></pre></td></tr></table></figure>
<p><strong>SIGN(X)</strong><br>返回参数的符号，为 -1、0 或 1，取决于 <code>X</code> 是否是负数、零或正数。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SIGN</span>(<span class="params"><span class="number">-32</span></span>)</span>; <span class="comment">// 输出 -1</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SIGN</span>(<span class="params"><span class="number">0</span></span>)</span>; <span class="comment">// 输出 0</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SIGN</span>(<span class="params"><span class="number">234</span></span>)</span>; <span class="comment">// 输出 1</span></span><br></pre></td></tr></table></figure>
<p><strong>MOD(N,M) 或 %</strong><br>模 (类似 <code>C</code> 中的%操作符)。返回 <code>N</code> 被 <code>M</code> 除的余数。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select MOD(<span class="number">234</span>, <span class="number">10</span>); <span class="comment">// 输出  4</span></span><br><span class="line">select <span class="number">253</span> % <span class="number">7</span>; <span class="comment">// 输出 1</span></span><br><span class="line">select MOD(<span class="number">29</span>,<span class="number">9</span>); <span class="comment">// 输出  2</span></span><br></pre></td></tr></table></figure>
<p><strong>FLOOR(X)</strong><br>返回不大于 <code>X</code> 的最大整数值。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FLOOR</span>(<span class="params"><span class="number">1.23</span></span>)</span>; <span class="comment">// 输出 1</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FLOOR</span>(<span class="params"><span class="number">-1.23</span></span>)</span>; <span class="comment">// 输出  -2</span></span><br></pre></td></tr></table></figure>
<p><strong>CEILING(X)</strong><br>返回不小于 <code>X</code> 的最小整数值。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">CEILING</span>(<span class="params"><span class="number">1.23</span></span>)</span>;  <span class="comment">// 输出 2</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">CEILING</span>(<span class="params"><span class="number">-1.23</span></span>)</span>;  <span class="comment">// 输出 -1</span></span><br></pre></td></tr></table></figure>
<p><strong>ROUND(X) 和 ROUND(X,D)</strong></p>
<p>返回参数 <code>X</code> 的四舍五入的一个整数。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ROUND</span>(<span class="params"><span class="number">-1.23</span></span>)</span>;<span class="comment">// 输出 -1</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ROUND</span>(<span class="params"><span class="number">-1.58</span></span>)</span>;<span class="comment">// 输出 -2</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ROUND</span>(<span class="params"><span class="number">1.58</span></span>)</span>; <span class="comment">// 输出 2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ROUND</span>(<span class="params"><span class="number">1.298</span>, <span class="number">1</span></span>)</span>; <span class="comment">// 输出   1.3</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ROUND</span>(<span class="params"><span class="number">1.298</span>, <span class="number">0</span></span>)</span>; <span class="comment">// 输出  1</span></span><br></pre></td></tr></table></figure>
<p><strong>EXP(X)</strong><br>返回值 <code>e</code>（自然对数的底）的 <code>X</code> 次方。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">EXP</span>(<span class="params"><span class="number">2</span></span>)</span>; <span class="comment">// 输出  7.389056</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">EXP</span>(<span class="params"><span class="number">-2</span></span>)</span>; <span class="comment">// 输出 0.135335</span></span><br></pre></td></tr></table></figure>
<p><strong>LOG(X)</strong><br>返回 <code>X</code> 的自然对数。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LOG</span>(<span class="params"><span class="number">2</span></span>)</span>; <span class="comment">// 输出  0.693147</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LOG</span>(<span class="params"><span class="number">-2</span></span>)</span>; <span class="comment">// 输出  NULL</span></span><br></pre></td></tr></table></figure>
<p><strong>LOG10(X)</strong><br>返回 <code>X</code> 的以10为底的对数。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LOG10</span>(<span class="params"><span class="number">2</span></span>)</span>; <span class="comment">// 输出  0.301030</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LOG10</span>(<span class="params"><span class="number">100</span></span>)</span>; <span class="comment">// 输出  2.000000</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LOG10</span>(<span class="params"><span class="number">-100</span></span>)</span>; <span class="comment">// 输出   NULL</span></span><br></pre></td></tr></table></figure>
<p><strong>POW(X,Y)</strong><br>和 <code>POWER(X,Y)</code> 等价<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">POW</span>(<span class="params"><span class="number">2</span>,<span class="number">2</span></span>)</span>; <span class="comment">// 输出  4.000000</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">POW</span>(<span class="params"><span class="number">2</span>,<span class="number">-2</span></span>)</span>; <span class="comment">// 输出  0.250000</span></span><br></pre></td></tr></table></figure></p>
<p><strong>SQRT(X)</strong><br>返回非负数 <code>X</code> 的平方根。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SQRT</span>(<span class="params"><span class="number">4</span></span>)</span>; <span class="comment">// 输出   2.000000</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SQRT</span>(<span class="params"><span class="number">20</span></span>)</span>; <span class="comment">// 输出  4.472136</span></span><br></pre></td></tr></table></figure>
<p><strong>PI()</strong><br>返回 <code>PI</code> 的值（圆周率）。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">PI</span>(<span class="params"></span>)</span>; <span class="comment">// 输出 3.141593</span></span><br></pre></td></tr></table></figure>
<p><strong>COS(X)</strong><br>返回 <code>X</code> 的余弦, 在这里 <code>X</code> 以弧度给出。</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">select</span> <span class="built_in">COS</span>(<span class="built_in">PI</span>()); <span class="comment">// 输出 -1.000000</span></span><br></pre></td></tr></table></figure>
<p><strong>SIN(X)</strong><br>返回 <code>X</code> 的正弦值，在此 <code>X</code> 以弧度给出。</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">select</span> <span class="built_in">SIN</span>(<span class="built_in">PI</span>()); <span class="comment">// 输出 0.000000</span></span><br></pre></td></tr></table></figure>
<p><strong>TAN(X)</strong><br>返回 <code>X</code> 的正切值，在此 <code>X</code> 以弧度给出。</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">select</span> <span class="built_in">TAN</span>(<span class="built_in">PI</span>()+<span class="number">1</span>); <span class="comment">// 输出 1.557408</span></span><br></pre></td></tr></table></figure>
<p><strong>ACOS(X)</strong><br>返回 <code>X</code> 反余弦，即其余弦值是 <code>X</code>。如果 <code>X</code> 不在-1到1的范围，返回 <code>NULL</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ACOS</span>(<span class="params"><span class="number">1</span></span>)</span>; <span class="comment">// 输出  0.000000</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ACOS</span>(<span class="params"><span class="number">1.0001</span></span>)</span>; <span class="comment">// 输出  NULL</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ACOS</span>(<span class="params"><span class="number">0</span></span>)</span>; <span class="comment">// 输出  1.570796</span></span><br></pre></td></tr></table></figure>
<p><strong>ASIN(X)</strong><br>返回 <code>X</code> 反正弦值，即其正弦值是 <code>X</code>。L如果 <code>X</code> 不在-1到1的范围，返回 <code>NULL</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ASIN</span>(<span class="params"><span class="number">0.2</span></span>)</span>; <span class="comment">//  输出   0.201358</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ASIN</span>(<span class="params"><span class="string">'foo'</span></span>)</span>; <span class="comment">// 输出   0.000000</span></span><br></pre></td></tr></table></figure>
<p><strong>ATAN(X)</strong><br>返回 <code>X</code> 的反正切值，即其正切值是<code>X</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ATAN</span>(<span class="params"><span class="number">2</span></span>)</span>; <span class="comment">// 输出 1.107149</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ATAN</span>(<span class="params"><span class="number">-2</span></span>)</span>; <span class="comment">// 输出 -1.107149</span></span><br></pre></td></tr></table></figure>
<p><strong>ATAN2(X,Y)</strong><br>返回 2 个变量 <code>X</code> 和 <code>Y</code> 的反正切。它类似于计算 <code>Y/X</code> 的反正切，除了两个参数的符号被用来决定结果的象限。</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">select</span> <span class="built_in">ATAN</span>(<span class="number">-2</span>,<span class="number">2</span>); <span class="comment">// 输出  -0.785398</span></span><br><span class="line"><span class="built_in">select</span> <span class="built_in">ATAN</span>(<span class="built_in">PI</span>(),<span class="number">0</span>); <span class="comment">// 输出  1.570796</span></span><br></pre></td></tr></table></figure>
<p><strong>COT(X)</strong><br>返回 <code>X</code> 的余切。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">COT</span>(<span class="params"><span class="number">12</span></span>)</span>; <span class="comment">// 输出   -1.57267341</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">COT</span>(<span class="params"><span class="number">0</span></span>)</span>; <span class="comment">// 输出   NULL</span></span><br></pre></td></tr></table></figure>
<p><strong>RAND() 和 RAND(N)</strong><br>返回在范围 0 到 1.0 内的随机浮点值。如果一个整数参数 <code>N</code> 被指定，它被用作种子值。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RAND</span>(<span class="params"></span>)</span>;  <span class="comment">// 输出  0.5925</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RAND</span>(<span class="params"><span class="number">20</span></span>)</span>; <span class="comment">// 输出  0.1811</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RAND</span>(<span class="params"><span class="number">20</span></span>)</span>; <span class="comment">// 输出  0.1811</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RAND</span>(<span class="params"></span>)</span>; <span class="comment">// 输出 0.2079</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RAND</span>(<span class="params"></span>)</span>; <span class="comment">// 输出  0.7888</span></span><br></pre></td></tr></table></figure>
<p><strong>LEAST(X,Y,…)</strong></p>
<p>有 2 和 2 个以上的参数，返回最小(最小值)的参数。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LEAST</span>(<span class="params"><span class="number">2</span>,<span class="number">0</span></span>)</span>; <span class="comment">// 输出 0</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LEAST</span>(<span class="params"><span class="number">34.0</span>,<span class="number">3.0</span>,<span class="number">5.0</span>,<span class="number">767.0</span></span>)</span>; <span class="comment">// 输出 3.0</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LEAST</span>(<span class="params"><span class="string">"B"</span>,<span class="string">"A"</span>,<span class="string">"C"</span></span>)</span>; <span class="comment">// 输出 "A"</span></span><br></pre></td></tr></table></figure>
<p><strong>GREATEST(X,Y,…)</strong><br>返回最大(最大值)的参数。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">GREATEST</span>(<span class="params"><span class="number">2</span>,<span class="number">0</span></span>)</span>; <span class="comment">// 输出  2</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">GREATEST</span>(<span class="params"><span class="number">34.0</span>,<span class="number">3.0</span>,<span class="number">5.0</span>,<span class="number">767.0</span></span>)</span>;  <span class="comment">// 输出 767.0</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">GREATEST</span>(<span class="params"><span class="string">"B"</span>,<span class="string">"A"</span>,<span class="string">"C"</span></span>)</span>; <span class="comment">// 输出  "C"</span></span><br></pre></td></tr></table></figure>
<p><strong>DEGREES(X)</strong><br>返回参数 <code>X</code>，从弧度变换为角度。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">DEGREES</span>(<span class="built_in">PI</span>()); // 输出 180.000000</span><br></pre></td></tr></table></figure>
<p><strong>RADIANS(X)</strong><br>返回参数 <code>X</code>，从角度变换为弧度。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RADIANS</span>(<span class="params"><span class="number">90</span></span>)</span>; <span class="comment">// 输出   1.570796</span></span><br></pre></td></tr></table></figure>
<p><strong>TRUNCATE(X,D)</strong><br>返回数字 <code>X</code>，截断为 <code>D</code> 位小数。如果 <code>D</code> 为 0，结果将没有小数点或小数部分。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">TRUNCATE</span>(<span class="params"><span class="number">1.223</span>,<span class="number">1</span></span>)</span>; <span class="comment">// 输出  1.2</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">TRUNCATE</span>(<span class="params"><span class="number">1.999</span>,<span class="number">1</span></span>)</span>; <span class="comment">// 输出  1.9</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">TRUNCATE</span>(<span class="params"><span class="number">1.999</span>,<span class="number">0</span></span>)</span>; <span class="comment">// 输出  1</span></span><br></pre></td></tr></table></figure>
<h1 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h1><p>对于针对字符串位置的操作，第一个位置被标记为 1。</p>
<p><strong>ASCII(str)</strong><br>返回字符串 <code>str</code> 的最左面字符的 <code>ASCII</code> 代码值。如果 <code>str</code> 是空字符串，返回 0。如果 <code>str</code> 是 <code>NULL</code>，返回 <code>NULL</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ASCII</span>(<span class="params"><span class="string">'2'</span></span>)</span>; <span class="comment">// 输出    50</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ASCII</span>(<span class="params"><span class="number">2</span></span>)</span>; <span class="comment">// 输出  50</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ASCII</span>(<span class="params"><span class="string">'dx'</span></span>)</span>; <span class="comment">// 输出   100</span></span><br></pre></td></tr></table></figure>
<p><strong>ORD(str)</strong><br>如果字符串 <code>str</code> 最左面字符是一个多字节字符，通过以格式((<code>first byte ASCII code)*256+(second byte ASCII code))[*256+third byte ASCII code...</code>]返回字符的 <code>ASCII</code> 代码值来返回多字节字符代码。如果最左面的字符不是一个多字节字符。返回与 <code>ASCII()</code> 函数返回的相同值。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ORD</span>(<span class="params"><span class="string">'2'</span></span>)</span>; <span class="comment">// 输出  50</span></span><br></pre></td></tr></table></figure>
<p><strong>CONV(N,from_base,to_base)</strong><br>在不同的数字基之间变换数字。返回数字 <code>N</code> 的字符串数字，从 <code>from_base</code> 基变换为 <code>to_base</code> 基，如果任何参数是<code>NULL</code>，返回 <code>NULL</code>。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select CONV(<span class="string">"a"</span>,<span class="number">16</span>,<span class="number">2</span>); <span class="comment">// 输出   '1010'</span></span><br><span class="line">select CONV(<span class="string">"6E"</span>,<span class="number">18</span>,<span class="number">8</span>); <span class="comment">// 输出  '172'</span></span><br><span class="line">select CONV(<span class="number">-17</span>,<span class="number">10</span>,<span class="number">-18</span>); <span class="comment">// 输出  '-H'</span></span><br><span class="line">select CONV(<span class="number">10</span>+<span class="string">"10"</span>+'<span class="number">10</span>'+<span class="number">0xa</span>,<span class="number">10</span>,<span class="number">10</span>); <span class="comment">// 输出  '40'</span></span><br></pre></td></tr></table></figure>
<p><strong>BIN(N)</strong><br>返回二进制值 <code>N</code> 的一个字符串表示，在此 <code>N</code> 是一个长整数(<code>BIGINT</code>)数字，这等价于<code>CONV(N,10,2)</code>。如果 <code>N</code> 是 <code>NULL</code>，返回 <code>NULL</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">BIN</span>(<span class="params"><span class="number">12</span></span>)</span>; <span class="comment">// 输出 '1100'</span></span><br></pre></td></tr></table></figure>
<p><strong>OCT(N)</strong><br>返回八进制值 <code>N</code> 的一个字符串的表示，在此N是一个长整型数字，这等价于 <code>CONV(N,10,8)</code>。如果 <code>N</code> 是 <code>NULL</code>，返回 <code>NULL</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">OCT</span>(<span class="params"><span class="number">12</span></span>)</span>; <span class="comment">// 输出  '14'</span></span><br></pre></td></tr></table></figure>
<p><strong>HEX(N)</strong><br>返回十六进制值 <code>N</code> 一个字符串的表示，在此 <code>N</code> 是一个长整型(<code>BIGINT</code>)数字，这等价于 <code>CONV(N,10,16)</code> 。如果 <code>N</code> 是 <code>NULL</code>，返回 <code>NULL</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">HEX</span>(<span class="params"><span class="number">255</span></span>)</span>; <span class="comment">// 输出 'FF'</span></span><br></pre></td></tr></table></figure>
<p><strong>CHAR(N,…)</strong><br><code>CHAR()</code> 将参数解释为整数并且返回由这些整数的 <code>ASCII</code> 代码字符组成的一个字符串。<code>NULL</code> 值被跳过。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select CHAR(<span class="number">77</span>,<span class="number">121</span>,<span class="number">83</span>,<span class="number">81</span>,'<span class="number">76</span>'); <span class="comment">// 输出  'MySQL'</span></span><br><span class="line">select CHAR(<span class="number">77</span>,<span class="number">77.3</span>,'<span class="number">77.3</span>'); <span class="comment">// 输出  'MMM'</span></span><br></pre></td></tr></table></figure>
<p><strong>CONCAT(str1,str2,…)</strong><br>返回来自于参数连结的字符串。如果任何参数是 <code>NULL</code>，返回 <code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">CONCAT</span>(<span class="string">'My'</span>, <span class="string">'S'</span>, <span class="string">'QL'</span>); // 输出   'MySQL'</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CONCAT</span>(<span class="string">'My'</span>, <span class="literal">NULL</span>, <span class="string">'QL'</span>);// 输出    NULL</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CONCAT</span>(<span class="number">14.3</span>); // 输出   '14.3'</span><br></pre></td></tr></table></figure>
<p><strong>LENGTH(str)</strong><br>等同于 <code>OCTET_LENGTH(str)</code> <code>CHAR_LENGTH(str)</code> <code>CHARACTER_LENGTH(str)</code> </p>
<p>返回字符串str的长度。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LENGTH</span>(<span class="params"><span class="string">'text'</span></span>)</span>; <span class="comment">// 输出   4</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">OCTET_LENGTH</span>(<span class="params"><span class="string">'text'</span></span>)</span>; <span class="comment">// 输出  4</span></span><br></pre></td></tr></table></figure>
<p><strong>LOCATE(substr,str)</strong><br>等同于 <code>POSITION(substr IN str)</code></p>
<p>返回子串 <code>substr</code> 在字符串 <code>str</code> 第一个出现的位置，如果 <code>substr</code> 不是在 <code>str</code> 里面，返回 0.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LOCATE</span>(<span class="params"><span class="string">'bar'</span>, <span class="string">'foobarbar'</span></span>)</span>; <span class="comment">// 输出  4</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LOCATE</span>(<span class="params"><span class="string">'xbar'</span>, <span class="string">'foobar'</span></span>)</span>; <span class="comment">// 输出  0</span></span><br></pre></td></tr></table></figure>
<p><strong>LOCATE(substr,str,pos)</strong><br>返回子串 <code>substr</code> 在字符串 <code>str</code> 第一个出现的位置，从位置 <code>pos</code> 开始。如果 <code>substr</code> 不是在 <code>str</code> 里面，返回 0。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LOCATE</span>(<span class="params"><span class="string">'bar'</span>, <span class="string">'foobarbar'</span>,<span class="number">5</span></span>)</span>; <span class="comment">// 输出  7</span></span><br></pre></td></tr></table></figure>
<p><strong>INSTR(str,substr)</strong><br>返回子串 <code>substr</code> 在字符串 <code>str</code> 中的第一个出现的位置。这与有 2 个参数形式的 <code>LOCATE()</code> 相同，除了参数被颠倒。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">INSTR</span>(<span class="params"><span class="string">'foobarbar'</span>, <span class="string">'bar'</span></span>)</span>; <span class="comment">// 输出   4</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">INSTR</span>(<span class="params"><span class="string">'xbar'</span>, <span class="string">'foobar'</span></span>)</span>; <span class="comment">// 输出  0</span></span><br></pre></td></tr></table></figure>
<p><strong>LPAD(str,len,padstr)</strong><br>返回字符串 <code>str</code>，左面用字符串 <code>padstr</code> 填补直到 <code>str</code> 是 <code>len</code> 个字符长。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LPAD</span>(<span class="params"><span class="string">'hi'</span>,<span class="number">4</span>,<span class="string">'??'</span></span>)</span>; <span class="comment">// 输出  '??hi'</span></span><br></pre></td></tr></table></figure>
<p><strong>RPAD(str,len,padstr)</strong><br>返回字符串<code>str</code>，右面用字符串 <code>padstr</code> 填补直到 <code>str</code> 是 <code>len</code> 个字符长。  </p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RPAD</span>(<span class="params"><span class="string">'hi'</span>,<span class="number">5</span>,<span class="string">'??'</span></span>)</span>; <span class="comment">// 输出  'hi???'</span></span><br></pre></td></tr></table></figure>
<p><strong>LEFT(str,len)</strong><br>返回字符串 <code>str</code> 的最左面 <code>len</code> 个字符。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LEFT</span>(<span class="params"><span class="string">'foobarbar'</span>, <span class="number">5</span></span>)</span>; <span class="comment">// 输出   'fooba'</span></span><br></pre></td></tr></table></figure>
<p><strong>RIGHT(str,len)</strong><br>返回字符串 <code>str</code> 的最右面 <code>len</code> 个字符。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RIGHT</span>(<span class="params"><span class="string">'foobarbar'</span>, <span class="number">4</span></span>)</span>; <span class="comment">// 输出  'rbar'</span></span><br></pre></td></tr></table></figure>
<p><strong>SUBSTRING(str,pos,len)</strong><br>等同于 <code>SUBSTRING(str FROM pos FOR len)</code> <code>MID(str,pos,len)</code></p>
<p>从字符串 <code>str</code> 返回一个 <code>len</code> 个字符的子串，从位置 <code>pos</code> 开始。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SUBSTRING</span>(<span class="params"><span class="string">'Quadratically'</span>,<span class="number">5</span>,<span class="number">6</span></span>)</span>; <span class="comment">// 输出  'ratica'</span></span><br></pre></td></tr></table></figure>
<p><strong>SUBSTRING(str,pos)</strong><br>等同于 <code>SUBSTRING(str FROM pos)</code></p>
<p>从字符串 <code>str</code> 的起始位置 <code>pos</code> 返回一个子串。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">SUBSTRING</span>(<span class="string">'Quadratically'</span>,<span class="number">5</span>); // 输出  'ratically'</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">SUBSTRING</span>(<span class="string">'foobarbar'</span> <span class="keyword">FROM</span> <span class="number">4</span>); // 输出  'barbar'</span><br></pre></td></tr></table></figure>
<p><strong>SUBSTRING_INDEX(str,delim,count)</strong><br>返回从字符串 <code>str</code> 的第 <code>count</code> 个出现的分隔符 <code>delim</code> 之后的子串。如果 <code>count</code> 是正数，返回最后的分隔符到左边(从左边数) 的所有字符。如果 <code>count</code> 是负数，返回最后的分隔符到右边的所有字符(从右边数)。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SUBSTRING_INDEX</span>(<span class="params"><span class="string">'www.mysql.com'</span>, <span class="string">'.'</span>, <span class="number">2</span></span>)</span>; <span class="comment">// 输出  'www.mysql'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SUBSTRING_INDEX</span>(<span class="params"><span class="string">'www.mysql.com'</span>, <span class="string">'.'</span>, <span class="number">-2</span></span>)</span>; <span class="comment">// 输出 'mysql.com'</span></span><br></pre></td></tr></table></figure>
<p><strong>LTRIM(str)</strong><br>返回删除了其前置空格字符的字符串 <code>str</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LTRIM</span>(<span class="params"><span class="string">'  barbar'</span></span>)</span>; <span class="comment">// 输出  'barbar'</span></span><br></pre></td></tr></table></figure>
<p><strong>RTRIM(str)</strong><br>返回删除了其拖后空格字符的字符串 <code>str</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RTRIM</span>(<span class="params"><span class="string">'barbar   '</span></span>)</span>; <span class="comment">// 输出   'barbar'</span></span><br></pre></td></tr></table></figure>
<p><strong>TRIM([[BOTH | LEADING | TRAILING] [remstr] FROM] str)</strong><br>返回字符串 <code>str</code>，其所有 <code>remstr</code> 前缀或后缀被删除了。如果没有修饰符 <code>BOTH</code>、<code>LEADING</code> 或 <code>TRAILING</code> 给出，<code>BOTH</code> 被假定。如果 <code>remstr</code> 没被指定，空格被删除。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">TRIM</span>(<span class="string">'  bar   '</span>); // 输出   'bar'</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">TRIM</span>(<span class="keyword">LEADING</span> <span class="string">'x'</span> <span class="keyword">FROM</span> <span class="string">'xxxbarxxx'</span>); // 输出   'barxxx'</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">TRIM</span>(<span class="keyword">BOTH</span> <span class="string">'x'</span> <span class="keyword">FROM</span> <span class="string">'xxxbarxxx'</span>); // 输出   'bar'</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">TRIM</span>(TRAILING <span class="string">'xyz'</span> <span class="keyword">FROM</span> <span class="string">'barxxyz'</span>); // 输出   'barx'</span><br></pre></td></tr></table></figure>
<p><strong>SOUNDEX(str)</strong><br>返回 <code>str</code> 的一个同音字符串。听起来“大致相同”的 2 个字符串应该有相同的同音字符串。一个“标准”的同音字符串长是 4 个字符，但是 <code>SOUNDEX()</code> 函数返回一个任意长的字符串。你可以在结果上使用 <code>SUBSTRING()</code> 得到一个“标准”的 同音串。所有非数字字母字符在给定的字符串中被忽略。所有在 <code>A-Z</code> 之外的字符国际字母被当作元音。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SOUNDEX</span>(<span class="params"><span class="string">'Hello'</span></span>)</span>;  <span class="comment">// 输出 'H400'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SOUNDEX</span>(<span class="params"><span class="string">'Quadratically'</span></span>)</span>;  <span class="comment">// 输出  'Q36324'</span></span><br></pre></td></tr></table></figure>
<p><strong>SPACE(N)</strong><br>返回由 <code>N</code> 个空格字符组成的一个字符串。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SPACE</span>(<span class="params"><span class="number">6</span></span>)</span>; <span class="comment">// 输出  '      '</span></span><br></pre></td></tr></table></figure>
<p><strong>REPLACE(str,from_str,to_str)</strong><br>返回字符串 <code>str</code>，其字符串 <code>from_str</code> 的所有出现由字符串 <code>to_str</code> 代替。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">REPLACE</span>(<span class="params"><span class="string">'www.mysql.com'</span>, <span class="string">'w'</span>, <span class="string">'Ww'</span></span>)</span>; <span class="comment">// 输出  'WwWwWw.mysql.com'</span></span><br></pre></td></tr></table></figure>
<p><strong>REPEAT(str,count)</strong><br>返回由重复 <code>countTimes</code> 次的字符串 <code>str</code> 组成的一个字符串。如果 <code>count &lt;= 0</code>，返回一个空字符串。如果 <code>str</code> 或 <code>count</code> 是 <code>NULL</code>，返回 <code>NULL</code>。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">REPEAT</span>(<span class="params"><span class="string">'MySQL'</span>, <span class="number">3</span></span>)</span>; <span class="comment">// 输出 'MySQLMySQLMySQL'</span></span><br></pre></td></tr></table></figure>
<p><strong>REVERSE(str)</strong><br>返回颠倒字符顺序的字符串 <code>str</code></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">REVERSE</span>(<span class="symbol">'abc</span>'); // 输出  <span class="symbol">'cba</span></span><br></pre></td></tr></table></figure>
<p><strong>INSERT(str,pos,len,newstr)</strong><br>返回字符串 <code>str</code>，在位置 <code>pos</code> 起始的子串且 <code>len</code> 个字符长得子串由字符串 <code>newstr</code> 代替。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">INSERT</span>(<span class="params"><span class="string">'Quadratic'</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">'What'</span></span>)</span>; <span class="comment">// 输出 'QuWhattic'</span></span><br></pre></td></tr></table></figure>
<p><strong>ELT(N,str1,str2,str3,…)</strong><br>如果 <code>N= 1</code>，返回 <code>str1</code>，如果 <code>N= 2</code>，返回 <code>str2</code>，等等。如果 <code>N</code>小于 1 或大于参数个数，返回 <code>NULL</code>。<code>ELT()</code> 是 <code>FIELD()</code> 反运算。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ELT</span>(<span class="params"><span class="number">1</span>, <span class="string">'ej'</span>, <span class="string">'Heja'</span>, <span class="string">'hej'</span>, <span class="string">'foo'</span></span>)</span>; <span class="comment">// 输出  'ej'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ELT</span>(<span class="params"><span class="number">4</span>, <span class="string">'ej'</span>, <span class="string">'Heja'</span>, <span class="string">'hej'</span>, <span class="string">'foo'</span></span>)</span>; <span class="comment">// 输出  'foo'</span></span><br></pre></td></tr></table></figure>
<p><strong>FIELD(str,str1,str2,str3,…)</strong><br>返回 <code>str</code> 在 <code>str1</code> , <code>str2</code>, <code>str3</code>, …清单的索引。如果 <code>str</code> 没找到，返回 0。<code>FIELD()</code> 是 <code>ELT()</code> 反运算。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FIELD</span>(<span class="params"><span class="string">'ej'</span>, <span class="string">'Hej'</span>, <span class="string">'ej'</span>, <span class="string">'Heja'</span>, <span class="string">'hej'</span>, <span class="string">'foo'</span></span>)</span>; <span class="comment">// 输出  2</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FIELD</span>(<span class="params"><span class="string">'fo'</span>, <span class="string">'Hej'</span>, <span class="string">'ej'</span>, <span class="string">'Heja'</span>, <span class="string">'hej'</span>, <span class="string">'foo'</span></span>)</span>; <span class="comment">// 输出  0</span></span><br></pre></td></tr></table></figure>
<p><strong>FIND_IN_SET(str,strlist)</strong><br>如果字符串 <code>str</code> 在由 <code>N</code> 子串组成的表 <code>strlist</code> 之中，返回一个 1 到 <code>N</code> 的值。一个字符串表是被“,”分隔的子串组成的一个字符串。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">SELECT <span class="title">FIND_IN_SET</span><span class="params">(<span class="string">'b'</span>,<span class="string">'a,b,c,d'</span>)</span></span>; <span class="comment">// 输出   2</span></span><br></pre></td></tr></table></figure>
<p><strong>MAKE_SET(bits,str1,str2,…)</strong><br>返回一个集合 (包含由“,”字符分隔的子串组成的一个字符串)，由相应的位在 <code>bits</code> 集合中的的字符串组成。<code>str1</code> 对应于位 0，<code>str2</code> 对应位 1，等等。在 <code>str1</code>, <code>str2</code>, …中的 <code>NULL</code> 串不添加到结果中。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAKE_SET</span>(<span class="number">1</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>); // 输出  'a'</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAKE_SET</span>(<span class="number">1</span> | <span class="number">4</span>,<span class="string">'hello'</span>,<span class="string">'nice'</span>,<span class="string">'world'</span>); // 输出  'hello,world'</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAKE_SET</span>(<span class="number">0</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>); // 输出  ''</span><br></pre></td></tr></table></figure>
<p><strong>EXPORT_SET(bits,on,off,[separator,[number_of_bits]])</strong><br>返回一个字符串，在这里对于在“ <code>bits</code> ”中设定每一位，你得到一个“<code>on</code>”字符串，并且对于每个复位(<code>reset</code>)的位，你得到一个“ <code>off</code> ”字符串。每个字符串用“ <code>separator</code> ”分隔(缺省“,”)，并且只有“ <code>bits</code> ”的“<code>number_of_bits</code> ” (缺省64)位被使用。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">EXPORT_SET</span>(<span class="params"><span class="number">5</span>,<span class="string">'Y'</span>,<span class="string">'N'</span>,<span class="string">','</span>,<span class="number">4</span></span>)  <span class="comment">// 输出 Y,N,Y,N</span></span></span><br></pre></td></tr></table></figure>
<p><strong>LCASE(str)</strong><br>等同于 <code>LOWER(str)</code></p>
<p>返回字符串 <code>str</code>，根据当前字符集映射(缺省是<code>ISO-8859-1 Latin1</code>)把所有的字符改变成小写。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LCASE</span>(<span class="params"><span class="string">'QUADRATICALLY'</span></span>)</span>; <span class="comment">// 输出 'quadratically'</span></span><br></pre></td></tr></table></figure>
<p><strong>UCASE(str)</strong><br>等同于 <code>UPPER(str)</code></p>
<p>返回字符串  <code>str</code>，根据当前字符集映射(缺省是 <code>ISO-8859-1 Latin1</code> )把所有的字符改变成大写。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">UCASE</span>(<span class="params"><span class="string">'Hej'</span></span>)</span>; <span class="comment">// 输出  'HEJ'</span></span><br></pre></td></tr></table></figure>
<p><strong>LOAD_FILE(file_name)</strong><br>读入文件并且作为一个字符串返回文件内容。文件必须在服务器上，你必须指定到文件的完整路径名，而且你必须有 <code>file</code> 权限。文件必须所有内容都是可读的并且小于 <code>max_allowed_packet</code> 。如果文件不存在或由于上面原因之一不能被读出，函数返回 <code>NULL</code>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name</span><br><span class="line"><span class="keyword">SET</span> blob_column=<span class="keyword">LOAD_FILE</span>(<span class="string">"/tmp/picture"</span>)</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h1 id="日期和时间函数"><a href="#日期和时间函数" class="headerlink" title="日期和时间函数"></a>日期和时间函数</h1><p><strong>DAYOFWEEK(date)</strong><br>返回日期 <code>date</code> 的星期索引(1=星期天，2=星期一, ……7=星期六)。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">DAYOFWEEK</span>(<span class="params"><span class="string">'1998-02-03'</span></span>)</span>; <span class="comment">// 输出 3</span></span><br></pre></td></tr></table></figure>
<p><strong>WEEKDAY(date)</strong><br>返回 <code>date</code> 的星期索引(0=星期一，1=星期二, ……6= 星期天)。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">WEEKDAY</span>(<span class="params"><span class="string">'1997-10-04 22:23:00'</span></span>)</span>; <span class="comment">// 输出 5</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">WEEKDAY</span>(<span class="params"><span class="string">'1997-11-05'</span></span>)</span>; <span class="comment">// 输出 2</span></span><br></pre></td></tr></table></figure>
<p><strong>DAYOFMONTH(date)</strong><br>返回date的月份中日期，在1到31范围内。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">DAYOFMONTH</span>(<span class="params"><span class="string">'1998-02-03'</span></span>)</span>; <span class="comment">// 输出  3</span></span><br></pre></td></tr></table></figure>
<p><strong>DAYOFYEAR(date)</strong><br>返回 <code>date</code> 在一年中的日数, 在 1 到 366 范围内。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">DAYOFYEAR</span>(<span class="params"><span class="string">'1998-02-03'</span></span>)</span>;  <span class="comment">// 输出 34</span></span><br></pre></td></tr></table></figure>
<p><strong>MONTH(date)</strong><br>返回 <code>date</code> 的月份，范围1到12。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">MONTH</span>(<span class="params"><span class="string">'1998-02-03'</span></span>)</span>; <span class="comment">// 输出  2</span></span><br></pre></td></tr></table></figure>
<p><strong>DAYNAME(date)</strong><br>返回 <code>date</code> 的星期名字。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">DAYNAME</span>(<span class="params"><span class="string">"1998-02-05"</span></span>)</span>; <span class="comment">// 输出  'Thursday'</span></span><br></pre></td></tr></table></figure>
<p><strong>MONTHNAME(date)</strong><br>返回 <code>date</code> 的月份名字。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">MONTHNAME</span>(<span class="params"><span class="string">"1998-02-05"</span></span>)</span>; <span class="comment">// 输出  'February'</span></span><br></pre></td></tr></table></figure>
<p><strong>QUARTER(date)</strong><br>返回 <code>date</code> 一年中的季度，范围 1 到 4。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">QUARTER</span>(<span class="params"><span class="string">'98-04-01'</span></span>)</span>; <span class="comment">// 输出  2</span></span><br></pre></td></tr></table></figure>
<p><strong>WEEK(date) 和 WEEK(date,first)</strong><br>对于星期天是一周的第一天的地方，有一个单个参数，返回 <code>date</code> 的周数，范围在 0 到 52。2 个参数形式 <code>WEEK()</code> 允许你指定星期是否开始于星期天或星期一。如果第二个参数是 0，星期从星期天开始，如果第二个参数是 1，从星期一开始。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select WEEK('<span class="number">1998</span><span class="number">-02</span><span class="number">-20</span>'); <span class="comment">// 输出   7</span></span><br><span class="line">select WEEK('<span class="number">1998</span><span class="number">-02</span><span class="number">-20</span>',<span class="number">0</span>); <span class="comment">// 输出   7</span></span><br><span class="line">select WEEK('<span class="number">1998</span><span class="number">-02</span><span class="number">-20</span>',<span class="number">1</span>); <span class="comment">// 输出  8</span></span><br></pre></td></tr></table></figure>
<p><strong>YEAR(date)</strong><br>返回 <code>date</code> 的年份，范围在 1000 到 9999。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">YEAR</span>(<span class="params"><span class="string">'98-02-03'</span></span>)</span>; <span class="comment">// 输出  1998</span></span><br></pre></td></tr></table></figure>
<p><strong>HOUR(time)</strong><br>返回 <code>time</code> 的小时，范围是 0 到 23。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">HOUR</span>(<span class="params"><span class="string">'10:05:03'</span></span>)</span>; <span class="comment">// 输出  10</span></span><br></pre></td></tr></table></figure>
<p><strong>MINUTE(time)</strong><br>返回 <code>time</code> 的分钟，范围是 0 到 59。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">MINUTE</span>(<span class="params"><span class="string">'98-02-03 10:05:03'</span></span>)</span>; <span class="comment">// 输出   5</span></span><br></pre></td></tr></table></figure>
<p><strong>SECOND(time)</strong><br>回来 <code>time</code> 的秒数，范围是0到59。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SECOND</span>(<span class="params"><span class="string">'10:05:03'</span></span>)</span>; <span class="comment">// 输出   3</span></span><br></pre></td></tr></table></figure>
<p><strong>PERIOD_ADD(P,N)</strong><br>增加 <code>N</code> 个月到阶段 <code>P</code>（以格式 <code>YYMM</code> 或 <code>YYYYMM</code>)。以格式 <code>YYYYMM</code> 返回值。注意阶段参数 <code>P</code> 不是日期值。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">PERIOD_ADD</span>(<span class="params"><span class="number">9801</span>,<span class="number">2</span></span>)</span>;  <span class="comment">// 输出  199803</span></span><br></pre></td></tr></table></figure>
<p><strong>PERIOD_DIFF(P1,P2)</strong><br>返回在时期 <code>P1</code> 和 <code>P2</code> 之间月数，<code>P1</code> 和 <code>P2</code> 应该以格式 <code>YYMM</code> 或 <code>YYYYMM</code> 。注意，时期参数 <code>P1</code> 和 <code>P2</code> 不是日期值。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">PERIOD_DIFF</span>(<span class="params"><span class="number">9802</span>,<span class="number">199703</span></span>)</span>; <span class="comment">// 输出   11</span></span><br></pre></td></tr></table></figure>
<p><strong>DATE_ADD(date,INTERVAL expr type) 和 DATE_SUB(date,INTERVAL expr type)</strong><br>等同于 <code>ADDDATE(date,INTERVAL expr type)</code> 和 <code>SUBDATE(date,INTERVAL expr type)</code></p>
<p>你可以使用 <code>+</code> 和 <code>-</code> 而不是 <code>DATE_ADD()</code> 和 <code>DATE_SUB()</code>。（见例子） <code>date</code> 是一个指定开始日期的 <code>DATETIME</code> 或 <code>DATE</code> 值，<code>expr</code> 是指定加到开始日期或从开始日期减去的间隔值一个表达式， <code>expr</code> 是一个字符串；它可以以一个“<code>-</code>”开始表示负间隔。<code>type</code> 是一个关键词，指明表达式应该如何被解释。</p>
<p>下表显示了type和expr参数怎样被关联：</p>
<table>
<thead>
<tr>
<th><code>type</code> 值</th>
<th>含义</th>
<th>期望的 <code>expr</code> 格式</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SECOND</code></td>
<td>秒</td>
<td><code>SECONDS</code></td>
</tr>
<tr>
<td><code>MINUTE</code></td>
<td>分钟</td>
<td><code>MINUTES</code></td>
</tr>
<tr>
<td><code>HOUR</code></td>
<td>时间</td>
<td><code>HOURS</code></td>
</tr>
<tr>
<td><code>DAY</code></td>
<td>天</td>
<td><code>DAYS</code></td>
</tr>
<tr>
<td><code>MONTH</code></td>
<td>月</td>
<td><code>MONTHS</code></td>
</tr>
<tr>
<td><code>YEAR</code></td>
<td>年</td>
<td><code>YEARS</code></td>
</tr>
<tr>
<td><code>MINUTE_SECOND</code></td>
<td>分钟和秒</td>
<td><code>MINUTES:SECONDS</code></td>
</tr>
<tr>
<td><code>HOUR_MINUTE</code></td>
<td>小时和分钟</td>
<td><code>HOURS:MINUTES</code></td>
</tr>
<tr>
<td><code>DAY_HOUR</code></td>
<td>天和小时</td>
<td><code>DAYS HOURS</code></td>
</tr>
<tr>
<td><code>YEAR_MONTH</code></td>
<td>年和月</td>
<td><code>YEARS-MONTHS</code></td>
</tr>
<tr>
<td><code>HOUR_SECOND</code></td>
<td>小时, 分钟，</td>
<td><code>HOURS:MINUTES:SECONDS</code></td>
</tr>
<tr>
<td><code>DAY_MINUTE</code></td>
<td>天, 小时, 分钟</td>
<td><code>DAYS HOURS:MINUTES</code></td>
</tr>
<tr>
<td><code>DAY_SECOND</code></td>
<td>天, 小时, 分钟, 秒</td>
<td><code>DAYS HOURS:MINUTES:SECONDS</code></td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">"1997-12-31 23:59:59"</span> + <span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>; // 输出  1998-01-01 00:00:00</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">DAY</span> + <span class="string">"1997-12-31"</span>; // 输出  1998-01-01</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"1998-01-01"</span> - <span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>; // 输出  1997-12-31 23:59:59 </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_ADD</span>(<span class="string">"1997-12-31 23:59:59"</span>, <span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>); // 输出  1998-01-01 00:00:00</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_ADD</span>(<span class="string">"1997-12-31 23:59:59"</span>, <span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">DAY</span>); // 输出  1998-01-01 23:59:59</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_ADD</span>(<span class="string">"1997-12-31 23:59:59"</span>, <span class="built_in">INTERVAL</span> <span class="string">"1:1"</span> MINUTE_SECOND); // 输出  1998-01-01 00:01:00</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_SUB</span>(<span class="string">"1998-01-01 00:00:00"</span>, <span class="built_in">INTERVAL</span> <span class="string">"1 1:1:1"</span> DAY_SECOND); // 输出  1997-12-30 22:58:59</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_ADD</span>(<span class="string">"1998-01-01 00:00:00"</span>, <span class="built_in">INTERVAL</span> <span class="string">"-1 10"</span> DAY_HOUR); // 输出  1997-12-30 14:00:00</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_SUB</span>(<span class="string">"1998-01-02"</span>, <span class="built_in">INTERVAL</span> <span class="number">31</span> <span class="keyword">DAY</span>); // 输出  1997-12-02</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">EXTRACT</span>(<span class="keyword">YEAR</span> <span class="keyword">FROM</span> <span class="string">"1999-07-02"</span>); // 输出  1999</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">EXTRACT</span>(YEAR_MONTH <span class="keyword">FROM</span> <span class="string">"1999-07-02 01:02:03"</span>); // 输出  199907</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">EXTRACT</span>(DAY_MINUTE <span class="keyword">FROM</span> <span class="string">"1999-07-02 01:02:03"</span>); // 输出  20102</span><br></pre></td></tr></table></figure>
<p>如果你指定太短的间隔值(不包括 <code>type</code> 关键词期望的间隔部分)，<code>MySQL</code> 假设你省掉了间隔值的最左面部分。例如，如果你指定一个 <code>type</code> 是 <code>DAY_SECOND</code>，值 <code>expr</code> 被希望有天、小时、分钟和秒部分。如果你象”1:10”这样指定值，<code>MySQL</code> 假设日子和小时部分是丢失的并且值代表分钟和秒。换句话说，”1:10” <code>DAY_SECOND</code> 以它等价于”1:10” <code>MINUTE_SECOND</code> 的方式解释，</p>
<p><strong>TO_DAYS(date)</strong><br>给出一个日期 <code>date</code>，返回一个天数(从 0 年的天数)。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">TO_DAYS</span>(<span class="params"><span class="number">950501</span></span>)</span>; <span class="comment">// 输出  728779</span></span><br><span class="line">mysql&gt; <span class="function"><span class="keyword">select</span> <span class="title">TO_DAYS</span>(<span class="params"><span class="string">'1997-10-07'</span></span>)</span>; <span class="comment">// 输出  729669</span></span><br></pre></td></tr></table></figure>
<p><strong>FROM_DAYS(N)</strong><br>给出一个天数 <code>N</code>，返回一个 <code>DATE</code> 值。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FROM_DAYS</span>(<span class="params"><span class="number">729669</span></span>)</span>; <span class="comment">// 输出  '1997-10-07'</span></span><br></pre></td></tr></table></figure>
<p><strong>DATE_FORMAT(date,format)</strong><br>根据 <code>format</code> 字符串格式化 <code>date</code> 值。下列修饰符可以被用在 <code>format</code> 字符串中：</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%M</code></td>
<td>月名字(<code>January……December</code>)</td>
</tr>
<tr>
<td><code>%W</code></td>
<td>星期名字(<code>Sunday……Saturday</code>)</td>
</tr>
<tr>
<td><code>%D</code></td>
<td>有英语前缀的月份的日期(<code>1st</code>, <code>2nd</code>, <code>3rd</code>, 等等。）</td>
</tr>
<tr>
<td><code>%Y</code></td>
<td>年, 数字, 4 位</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>年, 数字, 2 位</td>
</tr>
<tr>
<td><code>%a</code></td>
<td>缩写的星期名字(<code>Sun……Sat</code>)</td>
</tr>
<tr>
<td><code>%d</code></td>
<td>月份中的天数, 数字(00……31)</td>
</tr>
<tr>
<td><code>%e</code></td>
<td>月份中的天数, 数字(0……31)</td>
</tr>
<tr>
<td><code>%m</code></td>
<td>月, 数字(01……12)</td>
</tr>
<tr>
<td><code>%c</code></td>
<td>月, 数字(1……12)</td>
</tr>
<tr>
<td><code>%b</code></td>
<td>缩写的月份名字(<code>Jan……Dec</code>)</td>
</tr>
<tr>
<td><code>%j</code></td>
<td>一年中的天数(001……366)</td>
</tr>
<tr>
<td><code>%H</code></td>
<td>小时(00……23)</td>
</tr>
<tr>
<td><code>%k</code></td>
<td>小时(0……23)</td>
</tr>
<tr>
<td><code>%h</code></td>
<td>小时(01……12)</td>
</tr>
<tr>
<td><code>%I</code></td>
<td>小时(01……12)</td>
</tr>
<tr>
<td><code>%l</code></td>
<td>小时(1……12)</td>
</tr>
<tr>
<td><code>%i</code></td>
<td>分钟, 数字(00……59)</td>
</tr>
<tr>
<td><code>%r</code></td>
<td>时间, <code>12</code> 小时(<code>hh:mm:ss [AP]M</code>)</td>
</tr>
<tr>
<td><code>%T</code></td>
<td>时间, <code>24</code> 小时(<code>hh:mm:ss</code>)</td>
</tr>
<tr>
<td><code>%S</code></td>
<td>秒(00……59)</td>
</tr>
<tr>
<td><code>%s</code></td>
<td>秒(00……59)</td>
</tr>
<tr>
<td><code>%p</code></td>
<td><code>AM</code> 或 <code>PM</code></td>
</tr>
<tr>
<td><code>%w</code></td>
<td>一个星期中的天数(0=Sunday ……6=Saturday ）</td>
</tr>
<tr>
<td><code>%U</code></td>
<td>星期(0……52), 这里星期天是星期的第一天</td>
</tr>
<tr>
<td><code>%u</code></td>
<td>星期(0……52), 这里星期一是星期的第一天</td>
</tr>
<tr>
<td><code>%%</code></td>
<td>一个文字“%”。</td>
</tr>
</tbody>
</table>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> DATE_FORMAT('<span class="number">1997</span><span class="number">-10</span><span class="number">-04</span> <span class="number">22</span>:<span class="number">23</span>:<span class="number">00</span>', '<span class="symbol">%W</span> <span class="symbol">%M</span> <span class="symbol">%Y</span>')<span class="comment">; // 输出   'Saturday October 1997'</span></span><br><span class="line"><span class="comment">mysql&gt; select DATE_FORMAT('1997-10-04 22:23:00', '%H:%i:%s'); // 输出   '22:23:00'</span></span><br><span class="line"><span class="comment">mysql&gt; select DATE_FORMAT('1997-10-04 22:23:00', '%D %y %a %d %m %b %j'); // 输出   '4th 97 Sat 04 10 Oct 277'</span></span><br><span class="line"><span class="comment">mysql&gt; select DATE_FORMAT('1997-10-04 22:23:00', '%H %k %I %r %T %S %w'); // 输出 '22 22 10 10:23:00 PM 22:23:00 00 6'</span></span><br></pre></td></tr></table></figure>
<p><strong>TIME_FORMAT(time,format)</strong><br>这象上面的 <code>DATE_FORMAT()</code> 函数一样使用，但是 <code>format</code> 字符串只能包含处理小时、分钟和秒的那些格式修饰符。其他修饰符产生一个 <code>NULL</code> 值或0。</p>
<p><strong>CURDATE() 和 CURRENT_DATE</strong><br>以’<code>YYYY-MM-DD</code>‘或 <code>YYYYMMDD</code> 格式返回今天日期值，取决于函数是在一个字符串还是数字上下文被使用。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">CURDATE</span>(<span class="params"></span>)</span>; <span class="comment">// 输出  '1997-12-15'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">CURDATE</span>(<span class="params"></span>) + 0</span>; <span class="comment">// 输出  19971215</span></span><br></pre></td></tr></table></figure>
<p><strong>CURTIME() 和 CURRENT_TIME</strong><br>以’<code>HH:MM:SS</code>‘或 <code>HHMMSS</code> 格式返回当前时间值</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">CURTIME</span>(<span class="params"></span>)</span>; <span class="comment">// 输出  '23:50:26'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">CURTIME</span>(<span class="params"></span>) + 0</span>; <span class="comment">// 输出   235026</span></span><br></pre></td></tr></table></figure>
<p><strong>NOW()</strong><br>等同于 <code>SYSDATE()</code> <code>CURRENT_TIMESTAMP</code></p>
<p>以’<code>YYYY-MM-DD HH:MM:SS</code>‘或 <code>YYYYMMDDHHMMSS</code> 格式返回当前的日期和时间，取决于函数是在一个字符串还是在数字的上下文被使用。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">NOW</span>(<span class="params"></span>)</span>; <span class="comment">// 输出  '1997-12-15 23:50:26'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">NOW</span>(<span class="params"></span>) + 0</span>; <span class="comment">// 输出  19971215235026</span></span><br></pre></td></tr></table></figure>
<p><strong>UNIX_TIMESTAMP() 和 UNIX_TIMESTAMP(date)</strong><br>如果没有参数调用，返回一个 <code>Unix</code> 时间戳记(从’<code>1970-01-01 00:00:00</code>‘ <code>GMT</code> 开始的秒数)。如果 <code>UNIX_TIMESTAMP()</code> 用一个 <code>date</code> 参数被调用，它返回从’<code>1970-01-01 00:00:00</code>‘ <code>GMT</code> 开始的秒数值。<code>date</code> 可以是一个 <code>DATE</code> 字符串、一个 <code>DATETIME</code> 字符串、一个 <code>TIMESTAMP</code> 或以 <code>YYMMDD</code> 或 <code>YYYYMMDD</code> 格式的本地时间的一个数字。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">UNIX_TIMESTAMP</span>(<span class="params"></span>)</span>; <span class="comment">// 输出    882226357</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">UNIX_TIMESTAMP</span>(<span class="params"><span class="string">'1997-10-04 22:23:00'</span></span>)</span>; <span class="comment">// 输出   875996580</span></span><br></pre></td></tr></table></figure>
<p><strong>FROM_UNIXTIME(unix_timestamp)</strong><br>以’<code>YYYY-MM-DD HH:MM:SS</code>‘或 <code>YYYYMMDDHHMMSS</code> 格式返回 <code>unix_timestamp</code> 参数所表示的值</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FROM_UNIXTIME</span>(<span class="params"><span class="number">875996580</span></span>)</span>; <span class="comment">// 输出  '1997-10-04 22:23:00'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FROM_UNIXTIME</span>(<span class="params"><span class="number">875996580</span></span>) + 0</span>; <span class="comment">// 输出   19971004222300</span></span><br></pre></td></tr></table></figure>
<p><strong>FROM_UNIXTIME(unix_timestamp,format)</strong><br>返回表示 <code>Unix</code> 时间标记的一个字符串，根据 <code>format</code> 字符串格式化。</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> FROM_UNIXTIME(UNIX_TIMESTAMP(), '<span class="symbol">%Y</span> <span class="symbol">%D</span> <span class="symbol">%M</span> <span class="symbol">%h</span>:<span class="symbol">%i</span>:<span class="symbol">%s</span> <span class="symbol">%x</span>')<span class="comment">; // 输出  '1997 23rd December 03:43:30 x'</span></span><br></pre></td></tr></table></figure>
<p><strong>SEC_TO_TIME(seconds)</strong><br>返回 <code>seconds</code> 参数，变换成小时、分钟和秒，值以’<code>HH:MM:SS</code>‘或 <code>HHMMSS</code> 格式化</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SEC_TO_TIME</span>(<span class="params"><span class="number">2378</span></span>)</span>; <span class="comment">// 输出   '00:39:38'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">SEC_TO_TIME</span>(<span class="params"><span class="number">2378</span></span>) + 0</span>;  <span class="comment">// 输出  3938</span></span><br></pre></td></tr></table></figure>
<p><strong>TIME_TO_SEC(time)</strong><br>返回 <code>time</code> 参数，转换成秒。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">TIME_TO_SEC</span>(<span class="params"><span class="string">'22:23:00'</span></span>)</span>; <span class="comment">// 输出  80580</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">TIME_TO_SEC</span>(<span class="params"><span class="string">'00:39:38'</span></span>)</span>;  <span class="comment">// 输出  2378</span></span><br></pre></td></tr></table></figure>
<h1 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h1><p><strong>DATABASE()</strong><br>返回当前的数据库名字。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">DATABASE</span>(<span class="params"></span>)</span>;  <span class="comment">// 输出 'test'</span></span><br></pre></td></tr></table></figure>
<p><strong>USER()</strong><br>同 <code>SYSTEM_USER()</code> <code>SESSION_USER()</code></p>
<p>返回当前 <code>MySQL</code> 用户名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">USER</span>(); // 输出  'davida@localhost'</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> substring_index(<span class="keyword">USER</span>(),<span class="string">"@"</span>,<span class="number">1</span>); // 输出 'davida'</span><br></pre></td></tr></table></figure>
<p><strong>PASSWORD(str)</strong><br>从纯文本口令 <code>str</code> 计算一个口令字符串。该函数被用于为了在 <code>user</code> 授权表的 <code>Password</code> 列中存储口令而加密 <code>MySQL</code> 口令。  <code>PASSWORD()</code> 加密是非可逆的。<code>PASSWORD()</code> 不以与 <code>Unix</code> 口令加密的相同的方法执行口令加密。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">PASSWORD</span>(<span class="params"><span class="string">'badpwd'</span></span>)</span>; <span class="comment">// 输出 '7f84554057dd964b'</span></span><br></pre></td></tr></table></figure>
<p><strong>ENCRYPT(str[,salt])</strong><br>使用 <code>Unix crypt()</code> 系统调用加密 <code>str</code>。<code>salt</code> 参数应该是一个有 2 个字符的字符串</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">ENCRYPT</span>(<span class="params"><span class="string">"hello"</span></span>)</span>; <span class="comment">// 输出  'VxuFAJXVARROc'</span></span><br></pre></td></tr></table></figure>
<p>如果 <code>crypt()</code> 在你的系统上不可用，<code>ENCRYPT()</code> 总是返回 <code>NULL</code>。<code>ENCRYPT()</code> 只保留 <code>str</code> 起始 8 个字符而忽略所有其他，至少在某些系统上是这样。这将由底层的 <code>crypt()</code> 系统调用的行为决定。</p>
<p><strong>ENCODE(str,pass_str)</strong><br>使用 <code>pass_str</code> 作为口令加密 <code>str</code>。为了解密结果，使用 <code>DECODE()</code>。结果是一个二进制字符串，如果你想要在列中保存它，使用一个 <code>BLOB</code> 列类型。</p>
<p><strong>DECODE(crypt_str,pass_str)</strong><br>使用 <code>pass_str</code> 作为口令解密加密的字符串 <code>crypt_str</code>。<code>crypt_str</code> 应该是一个由 <code>ENCODE()</code> 返回的字符串。</p>
<p><strong>MD5(string)</strong><br>对字符串计算 <code>MD5</code> 校验和。值作为一个 32 长的十六进制数字被返回可以，例如用作哈希(<code>hash</code>)键。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">MD5</span>(<span class="params"><span class="string">"testing"</span></span>)</span>; <span class="comment">// 输出  'ae2b1fca515949e5d54fb22b8ed95575'</span></span><br></pre></td></tr></table></figure>
<p><strong>LAST_INSERT_ID([expr])</strong><br>返回被插入一个 <code>AUTO_INCREMENT</code> 列的最后一个自动产生的值。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">LAST_INSERT_ID</span>(<span class="params"></span>)</span>;  <span class="comment">// 输出  195</span></span><br></pre></td></tr></table></figure>
<p><strong>FORMAT(X,D)</strong><br>格式化数字 <code>X</code> 为类似于格式’<code>#,###,###.##</code>‘，四舍五入到 <code>D</code> 为小数。如果 <code>D</code> 为 0，结果将没有小数点和小数部分。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FORMAT</span>(<span class="params"><span class="number">12332.123456</span>, <span class="number">4</span></span>)</span>;  <span class="comment">// 输出 '12,332.1235'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FORMAT</span>(<span class="params"><span class="number">12332.1</span>,<span class="number">4</span></span>)</span>;  <span class="comment">// 输出   '12,332.1000'</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">FORMAT</span>(<span class="params"><span class="number">12332.2</span>,<span class="number">0</span></span>)</span>;  <span class="comment">// 输出  '12,332'</span></span><br></pre></td></tr></table></figure>
<p><strong>VERSION()</strong><br>返回表明 <code>MySQL</code> 服务器版本的一个字符串。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">VERSION</span>(<span class="params"></span>)</span>; <span class="comment">// 输出  '3.22.19b-log'</span></span><br></pre></td></tr></table></figure>
<p><strong>GET_LOCK(str,timeout)</strong><br>试图获得由字符串 <code>str</code> 给定的一个名字的锁定，第二个 <code>timeout</code> 为超时。如果锁定成功获得，返回 1，如果尝试超时了，返回 0，或如果发生一个错误，返回 <code>NULL</code> (例如从存储器溢出或线程用 <code>mysqladmin kill</code> 被杀死)。当你执行 <code>RELEASE_LOCK()</code> 时、执行一个新的 <code>GET_LOCK()</code> 或线程终止时，一个锁定被释放。该函数可以用来实现应用锁或模拟记录锁，它阻止其他客户用同样名字的锁定请求；赞成一个给定的锁定字符串名字的客户可以使用字符串执行子协作建议的锁定。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">GET_LOCK</span>(<span class="params"><span class="string">"lock1"</span>,<span class="number">10</span></span>)</span>; <span class="comment">// 输出  1</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">GET_LOCK</span>(<span class="params"><span class="string">"lock2"</span>,<span class="number">10</span></span>)</span>; <span class="comment">// 输出  1</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RELEASE_LOCK</span>(<span class="params"><span class="string">"lock2"</span></span>)</span>; <span class="comment">// 输出  1</span></span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">RELEASE_LOCK</span>(<span class="params"><span class="string">"lock1"</span></span>)</span>; <span class="comment">// 输出 NULL</span></span><br></pre></td></tr></table></figure>
<p>注意，第二个 <code>RELEASE_LOCK()</code> 调用返回 <code>NULL</code>，因为锁” <code>lock1</code> “自动地被第二个 <code>GET_LOCK()</code> 调用释放。</p>
<p><strong>RELEASE_LOCK(str)</strong><br>释放字符串 <code>str</code> 命名的通过 <code>GET_LOCK()</code> 获得的锁。如果锁被释放，返回 1，如果锁没被这个线程锁定(在此情况下锁没被释放)返回 0，并且如果命名的锁不存在，返回 <code>NULL</code>。如果锁从来没有通过调用 <code>GET_LOCK()</code> 获得或如果它已经被释放了，锁将不存在。</p>
<p><strong>BENCHMARK(count,expr)</strong></p>
<p><code>BENCHMARK()</code> 函数重复 <code>countTimes</code> 次执行表达式 <code>expr</code>，它可以用于计时 <code>MySQL</code> 处理表达式有多快。结果值总是 0。意欲用于 <code>mysql</code> 客户，它报告查询的执行时间。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">BENCHMARK</span>(<span class="number">1000000</span>,<span class="keyword">encode</span>(<span class="string">"hello"</span>,<span class="string">"goodbye"</span>));</span><br></pre></td></tr></table></figure>
<p>报告的时间是客户端的经过时间，不是在服务器端的 <code>CPU</code> 时间。执行 <code>BENCHMARK()</code> 若干次可能是明智的，并且注意服务器机器的负载有多重来解释结果。</p>
<h1 id="与-GROUP-BY-子句一起使用的函数"><a href="#与-GROUP-BY-子句一起使用的函数" class="headerlink" title="与 GROUP BY 子句一起使用的函数"></a>与 GROUP BY 子句一起使用的函数</h1><p>如果你在不包含 <code>GROUP BY</code> 子句的一个语句中使用聚合函数，它等价于聚合所有行。</p>
<p><strong>COUNT(expr)</strong><br>返回由一个 <code>SELECT</code> 语句检索出来的行的非 <code>NULL</code> 值的数目。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select student.student_name,COUNT(*)</span><br><span class="line"><span class="keyword">from</span> student,course</span><br><span class="line">where student.<span class="attribute">student_id</span>=course.student_id</span><br><span class="line">GROUP BY student_name;</span><br></pre></td></tr></table></figure>
<p><strong>COUNT(DISTINCT expr,[expr…])</strong><br>返回一个不同值的数目。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> results) <span class="keyword">from</span> student;</span><br></pre></td></tr></table></figure>
<p><strong>AVG(expr)</strong><br>返回 <code>expr</code> 的平均值。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select student_name, AVG(test_score)</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line">GROUP BY student_name;</span><br></pre></td></tr></table></figure>
<p><strong>MIN(expr) 和 MAX(expr)</strong><br>返回 <code>expr</code> 的最小或最大值。<code>MIN()</code> 和 <code>MAX()</code> 可以有一个字符串参数；在这种的情况下，他们返回最小或最大的字符串值。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select student_name, MIN(test_score), MAX(test_score)</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line">GROUP BY student_name;</span><br></pre></td></tr></table></figure>
<p><strong>SUM(expr)</strong><br>返回 <code>expr</code> 的和。注意，如果返回的集合没有行，它返回 <code>NULL</code>！</p>
<p><strong>STD(expr) 和 STDDEV(expr)</strong><br>返回 <code>expr</code> 标准差(<code>deviation</code>)。这是对 <code>ANSI SQL</code> 的扩展。该函数的形式<code>STDDEV()</code> 是提供与 <code>Oracle</code> 的兼容性。</p>
<p><strong>BIT_OR(expr)</strong><br>返回 <code>expr</code> 里所有位的位或。计算用 64 位(<code>BIGINT</code>)精度进行。</p>
<p><strong>BIT_AND(expr)</strong></p>
<p>返回 <code>expr</code> 里所有位的位与。计算用 64 位(<code>BIGINT</code>)精度进行。</p>

      
    </div>
    
    
    

    <div>
        
            

        
    </div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Mysql/" rel="tag"><i class="fa fa-tag"></i> Mysql</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/01/04/arithmetic-dynamic-programming/" rel="next" title="算法之动态规划">
                <i class="fa fa-chevron-left"></i> 算法之动态规划
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/01/10/codeigniter-init/" rel="prev" title="CodeIgniter 框架搭建">
                CodeIgniter 框架搭建 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Redgo" />
          <p class="site-author-name" itemprop="name">Redgo</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">98</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://segmentfault.com/u/greenlightt" target="_blank" title="Segmentfault">
                  
                    <i class="fa fa-fw fa-vcard"></i>
                  
                    
                      Segmentfault
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#算术函数"><span class="nav-number">1.</span> <span class="nav-text">算术函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#位函数"><span class="nav-number">2.</span> <span class="nav-text">位函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#逻辑运算"><span class="nav-number">3.</span> <span class="nav-text">逻辑运算</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#比较运算"><span class="nav-number">4.</span> <span class="nav-text">比较运算</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符串比较函数"><span class="nav-number">5.</span> <span class="nav-text">字符串比较函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#类型转换运算符"><span class="nav-number">6.</span> <span class="nav-text">类型转换运算符</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#控制流函数"><span class="nav-number">7.</span> <span class="nav-text">控制流函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数学函数"><span class="nav-number">8.</span> <span class="nav-text">数学函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符串函数"><span class="nav-number">9.</span> <span class="nav-text">字符串函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#日期和时间函数"><span class="nav-number">10.</span> <span class="nav-text">日期和时间函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#其他函数"><span class="nav-number">11.</span> <span class="nav-text">其他函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#与-GROUP-BY-子句一起使用的函数"><span class="nav-number">12.</span> <span class="nav-text">与 GROUP BY 子句一起使用的函数</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Redgo</span>
  <span id="busuanzi_container_site_uv" style="margin-left: 1%;">
    <i class="fa fa-user-md"></i>
    本站访客数:<span id="busuanzi_value_site_uv"></span>
  </span>
  <span class="post-count" style="margin-left: 1%;">
      <i class="fa fa-pencil"></i>
      博客全站共140.2k字
  </span>
</div>

<!--


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


-->

        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

</body>
</html>
